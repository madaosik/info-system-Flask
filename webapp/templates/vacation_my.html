{% extends 'base/base.html' %}
<!-- input: me, all -->

{% block title %}Dovolená{% endblock %}
{% block heading %}<h3><i class="far fa-calendar-alt mr-4"></i>Žádosti o dovolenou</h3>{% endblock %}
{% block bodynav %}


{% endblock %}
{% block body %}
    <div class="container-fluid pt-3">
        {% if me %}
            <table class="centertable table table-hover table-sm">
            <thead class="thead-light">
            <tr>
                <th>Datum začátku</th>
                <th>Datum konce</th>
                <th>Celkem dní</th>
                <th>Potvrzení</th>
                <th>Smazat</th>
            </tr>
            </thead>
        {% else %}
            <p>Neevidujeme žádné záznamy dovolené.</p>
        {% endif %}
        {% if me %}
            {% for dovolena in me %}
                {% if dovolena.do > date  or dovolena.potvrzeni== False%}
                <tr>
                    <td>{{ dovolena.od.strftime('%d/%m/%Y') }}</td>
                    <td>{{ dovolena.do.strftime('%d/%m/%Y') }}</td>
                    <td>{{ dovolena.celkem }}</td>
                    <td>{% if dovolena.potvrzeni == True %}
                    Áno
                        {%  elif dovolena.seen== False %}
                        Neviděné
                    {%  else %}
                    Ne
                    {% endif %}</td>
                <td> <form method="POST" action="{{ url_for('my_vacation_delete', id=current_user.id_zam, id_vac=dovolena.id_zaznamu) }}">
                          <input type="submit" value=&#x2718; class="btn deny_button" data-toggle="tooltip" data-html="true" title="Smazat">
                        </form></td>
                </tr>
                {% endif %}
            {% endfor %}

            </table>
        {% endif %}
    </div>
    <div class="container-fluid">
         <h3><i class="fas fa-history pr-3 pt-3"></i>Historie dovolené</h3>

        {% if me %}
            <table class="centertable table table-hover table-sm">
            <thead class="thead-light">
            <tr>
                <th>Datum začátku</th>
                <th>Datum konce</th>
                <th>Celkem dní</th>
                <th>Potvrzení</th>
            </tr>
            </thead>
        {% else %}
            <p>Neevidujeme žádné záznamy dovolené.</p>
        {% endif %}
    {% if me %}
        {% for dovolena in me %}
            {% if dovolena.do < date and dovolena.potvrzeni == True%}
            <tr>
                <td>{{ dovolena.od.strftime('%d/%m/%Y') }}</td>
                <td>{{ dovolena.do.strftime('%d/%m/%Y') }}</td>
                <td>{{ dovolena.celkem }}</td>
                <td>{% if dovolena.potvrzeni == True %}
                Áno
                {%  else %}
                Ne
                {% endif %}</td>
            </tr>
            {% endif %}
        {% endfor %}

        </table>
    {% endif %}
        <form method="GET" action="{{ url_for('vacation-add')}}">
         <input type="hidden" name="id" value="{{ current_user.id_zam}}">
            <input type="submit" value="Přidat" class="btn btn-secondary my-0 my-sm-0">
        </form>
    </div>
{% endblock %}